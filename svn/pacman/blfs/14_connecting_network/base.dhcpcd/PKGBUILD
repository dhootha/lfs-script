pkgname=${name}
pkgver=${version}
pkgrel=1
pkgdesc="RFC2131 compliant DHCP client daemon"
arch=('i686' 'x86_64')
url="http://roy.marples.name/projects/dhcpcd/"
license=('BSD')
groups=('base')
options=('emptydirs')  # We Need the Empty /var/lib/dhcpcd Directory
depends=(${_depends})
source=(${_url})
md5sums=(${md5})

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  ./configure --libexecdir=/lib/dhcpcd \
              --dbdir=/run             \
              --sysconfdir=/etc
  make
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}

  make DESTDIR=${pkgdir} install

  install -d ${pkgdir}/lib/dhcpcd/dhcpcd-hooks
  sed -i "s;/var/lib;/run;g" dhcpcd-hooks/50-dhcpcd-compat
  install -v -m 644 dhcpcd-hooks/50-dahcpcd-compat ${pkgdir}/lib/dhcpcd/dhcpcd-hooks/


  make install-service-dhcpcd


  cat > ${pkgdir}/etc/sysconfig/ifconfig.eth0 << "EOF"
ONBOOT="yes"
IFACE="eth0"
SERVICE="dhcpcd"
#DHCP_START="-b -q <insert appropriate start options here>"
#DHCP_STOP="-k <insert additional stop options here>"
EOF
}

# vim:set ts=2 sw=2 et:
