pkgname=${name}
pkgname_conf=${nconf}
pkgver=${version}
pkgver_conf=${verconf}
pkgrel=1
pkgdesc=""
arch=('i686' 'x86_64')
url="http://www.kernel.org/pub/linux/utils/kernel/hotplug/udev.html"
license=('custom')
groups=('base')
options=(!makeflags)
makedepends=()
install='install'
source=(${_url})
md5sums=(${md5})

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  mv ../${pkgname_conf}-${pkgver_conf} ./
  make -f ${pkgname_conf}-${pkgver_conf}/Makefile.lfs
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}
  make -f ${pkgname_conf}-${pkgver_conf}/Makefile.lfs DESTDIR=${pkgdir} install

  build/udevadm hwdb --update

  install -d ${pkgdir}/bin
  cp ${pkgname_conf}-${pkgver_conf}/init-net-rules.sh ${pkgdir}/bin
  chmod +x ${pkgdir}/bin

  cat > ${pkgdir}/etc/udev/rules.d/83-duplicate_devs.rules << "EOF"

# Persistent symlinks for webcam and tuner
KERNEL=="video*", ATTRS{idProduct}=="1910", ATTRS{idVendor}=="0d81", \
    SYMLINK+="webcam"
KERNEL=="video*", ATTRS{device}=="0x036f", ATTRS{vendor}=="0x109e", \
    SYMLINK+="tvtuner"

EOF
}

# vim:set ts=2 sw=2 et:
